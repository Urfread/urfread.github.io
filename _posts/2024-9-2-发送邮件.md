---
layout: post
title: 常用命令
date: 2024-08-28
tags: [Spring,参考]
---

spring配置文件
```yaml
spring:
  mail:
    host: smtp.163.com
    username: 15032895039@163.com
    password: 填你自己的授权码（有了授权码之后，保存好，别丢了）
    port: 25
    protocol: smtp
    default-encoding: UTF-8
```

mvn依赖
> 推荐在能使用mybatis或者其它常用依赖的情况下，测试邮箱服务，不然写好了，到时候和真实开发要用的版本不一样，不知道会出什么问题
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-mail</artifactId>
</dependency>
```

核心代码一共就两个，粘过来之后，改一下里面收件人的地址。
```java
package com.itheima.mp.email;


import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.mail.MessagingException;


@RestController
@RequestMapping("/email")
public class EmailController {

    @Autowired
    private EmailService emailService;

    @GetMapping("/send")
    public String sendEmail() {
        try {
        	// 第一个参数是目标邮箱，就是你要发到哪儿，可以填自己qq邮箱
            emailService.sendEmail("3131015733@qq.com", "测试发送邮箱服务", "5873");
            return "Email sent successfully to " + "3131015733@qq.com";
        } catch (MessagingException e) {
            return "Error sending email: " + e.getMessage();
        }
    }
}


```

```java
package com.itheima.mp.email;


import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

import javax.mail.MessagingException;

@Service
public class EmailService {
    private final JavaMailSender mailSender;

    @Autowired
    public EmailService(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void sendEmail(String to, String subject, String text) throws MessagingException {
        System.out.println("尝试发送邮箱");
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom("15032895039@163.com");
        message.setTo(to);
        message.setSubject(subject);
        message.setText(text);
        mailSender.send(message);
        System.out.println("发送成功");
    }
}

```